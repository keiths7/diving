"use strict";function loadOrderList(){var e={};ajax("/user/order",e,function(e){if("success"==e.message){var a="";e.orders.forEach(function(e,s){a+='<div class="row list-item">\n                        <div class="six wide column">\n                            <div class="ui middle aligned list">\n                                <div class="item">\n                                    <img class="ui large image" src="/images/course/1.png">\n                                    <div class=" content">\n                                    <a class="header">'+e.name+'</a>\n                                    <div class="description">'+e.description+'</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="two wide column ">'+e.money+'</div>\n                        <div class="three wide column">'+e.paytime+'</div>\n                        <div class="three wide column">Save</div>\n                        <div class="two wide column"><i class="edit icon"></i></div>\n                    </div>'}),$(".forms-wrap").find(".purchases .ui.grid").append(a)}})}function loadPayInfo(){ajax("/user/pay_info",{},function(e){"undefined"!=typeof e.id?($("#paybtn").text("Save"),$("#cardnumber").val(e.card_number),$("#valid_date").val(e.valid_thru),$("#cvc").val(e.cvc)):$("#paybtn").text("Add  New  Card")},function(e){})}function loadUserInfo(){function e(e){if("success"==e.message){$("#firstname").val(e.name),$("#lastname").val("lack"),$("#email").val("lack"),$("#phone").val(e.phone),$("#height").val(e.height),$("#weight").val(e.weight),$("#shoes_size").val(e.shoes_size);var a="ç”·"==e.gender?0:1;$("#gender")[0].selectedIndex=a}else alert(e.message)}ajax("/user/info",{},e),e()}function updatePayInfo(){var e={card_number:$("#cardnumber").val(),valid_thru:$("#valid_date").val(),cvc:"#cvc".val()};ajax("/user/update_pay_info",e,function(e){alert("update successfully!"),$("#paybtn").text("Save")})}function changePwd(){var e={old_password:$("#oldpwd").val(),password:$("#newpwd").val(),password_confirmation:$("#cfmpwd").val()};console.log(e),ajax("/user/init_password",e,function(e){"success"==e.message?alert("your password has been modified  successfully"):alert("Password modification failed ")},function(){alert("Password modification failed ")})}function updateUserInfo(){var e={gender:$("#gender option:selected").val(),phone:$("#phone").val(),height:$("#height").val(),weight:$("#weight").val(),shoes_size:$("#shoes_size").val(),name:$("#firstname").val()};ajax("/user/info/update",e,function(e){"success"==e.message?alert("Your information has been updated successfully"):alert("sorry,something went wrong")})}function resetPwd(){}function ajax(e,a,s,i,n){$.ajax({url:e,type:"GET",data:a,success:function(e){"function"==typeof s&&s(e)},error:function(e){"function"==typeof i&&i(e)}})}$(".profile-tab .row").on("click",".column",function(){$(this).addClass("sel").siblings().removeClass("sel");var e=$(this).data("tab");$("."+e).addClass("sel").siblings().removeClass("sel");var a=location.pathname+"#"+e;history.replaceState({title:"switch",url:a,otherKey:""},"",a)}),function(){var e=location.hash.substr(1)||"purchases";$("."+e).addClass("sel").siblings().removeClass("sel"),$(".column[data-tab="+e+"]").addClass("sel").siblings().removeClass("sel"),loadOrderList(),loadUserInfo(),loadPayInfo()}(),$(".forms-wrap ").on("click",".payment .ui.submit.button",updatePayInfo),$(".forms-wrap ").on("click",".setting .ui.submit.button",changePwd),$(".forms-wrap ").on("click",".profile .ui.submit.button",updateUserInfo);
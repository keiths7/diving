"use strict";function loadOrderList(){var a={code:0,message:"success",orders:[{id:1,pid:1,uid:1,type:0,start_date:"2016-09-21",end_date:"2016-09-21",divers:1,money:0,is_paid:0,paytime:"2016-09-20 15:50:50",discount:"",need_pay:"0",created_at:"2016-09-20 15:50:50",updated_at:"2016-09-20 15:50:50"},{id:1,pid:1,uid:1,type:0,start_date:"2016-09-21",end_date:"2016-09-21",divers:1,money:0,is_paid:0,paytime:"2016-09-20 15:50:50",discount:"",need_pay:"0",created_at:"2016-09-20 15:50:50",updated_at:"2016-09-20 15:50:50"},{id:1,pid:1,uid:1,type:0,start_date:"2016-09-21",end_date:"2016-09-21",divers:1,money:0,is_paid:0,paytime:"2016-09-20 15:50:50",discount:"",need_pay:"0",created_at:"2016-09-20 15:50:50",updated_at:"2016-09-20 15:50:50"}]};if("success"==a.message){var e="";a.orders.forEach(function(a,i){e+='<div class="row list-item">\n                        <div class="six wide column">\n                            <div class="ui middle aligned list">\n                                <div class="item">\n                                    <img class="ui large image" src="/images/course/1.png">\n                                    <div class=" content">\n                                    <a class="header"> destination name(lack of api data)</a>\n                                    <div class="description">the description(lack of api data)</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="two wide column ">'+a.money+'</div>\n                        <div class="three wide column">'+a.paytime+'</div>\n                        <div class="three wide column">Save</div>\n                        <div class="two wide column"><i class="edit icon"></i></div>\n                    </div>'}),$(".forms-wrap").find(".purchases .ui.grid").append(e)}}function loadPayInfo(){ajax("/user/pay_info",{},function(a){"undefined"!=typeof a.id?($("#paybtn").text("Save"),$("#cardnumber").val(a.card_number),$("#valid_date").val(a.valid_thru),$("#cvc").val(a.cvc)):$("#paybtn").text("Add  New  Card")},function(a){})}function loadUserInfo(){function a(a){$("#firstname").val("jhon"),$("#lastname").val("klin"),$("#email").val("xxxxx@xxx.com"),$("#phone").val("xxxxxxxxxxx"),$("#height").val("133"),$("#weight").val("212"),$("#shoes_size").val("44");var e=1;$("#gender")[0].selectedIndex=e}a()}function updatePayInfo(){}function changePwd(){var a={old_password:$("#oldpwd").val(),password:$("#newpwd").val(),password_confirmation:$("#cfmpwd").val()};console.log(a),ajax("/user/init_password",a,function(a){"success"==a.message?alert("your password has been modified  successfully"):alert("Password modification failed ")},function(){alert("Password modification failed ")})}function updateUserInfo(){}function resetPwd(){alert("暂缺少接口")}function ajax(a,e,i,s,d){$.ajax({url:a,type:"GET",data:e,success:function(a){"function"==typeof i&&i(a)},error:function(a){"function"==typeof s&&s(a)}})}$(".profile-tab .row").on("click",".column",function(){$(this).addClass("sel").siblings().removeClass("sel");var a=$(this).data("tab");$("."+a).addClass("sel").siblings().removeClass("sel");var e=location.pathname+"#"+a;history.replaceState({title:"switch",url:e,otherKey:""},"",e)}),function(){var a=location.hash.substr(1)||"purchases";$("."+a).addClass("sel").siblings().removeClass("sel"),$(".column[data-tab="+a+"]").addClass("sel").siblings().removeClass("sel"),loadOrderList(),loadUserInfo(),loadPayInfo()}(),$(".forms-wrap ").on("click",".payment .ui.submit.button",updatePayInfo),$(".forms-wrap ").on("click",".setting .ui.submit.button",changePwd),$(".forms-wrap ").on("click",".profile .ui.submit.button",updateUserInfo);
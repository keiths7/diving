"use strict";function loadOrderList(){var a={};ajax("/user/order",a,function(a){if("success"==a.message){var e="";a.orders.forEach(function(a,s){e+='<div class="row list-item">\n                        <div class="six wide column">\n                            <div class="ui middle aligned list">\n                                <div class="item">\n                                    <img class="ui large image" src="/images/course/1.png">\n                                    <div class=" content">\n                                    <a class="header">'+a.name+'</a>\n                                    <div class="description">'+a.description+'</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="two wide column ">'+a.money+'</div>\n                        <div class="three wide column">'+a.paytime+'</div>\n                        <div class="three wide column">Save</div>\n                        <div class="two wide column"><i class="edit icon"></i></div>\n                    </div>'}),$(".forms-wrap").find(".purchases .ui.grid").append(e)}})}function loadPayInfo(){ajax("/user/pay_info",{},function(a){"undefined"!=typeof a.id?($("#paybtn").text("Save"),$("#cardnumber").val(a.card_number),$("#valid_date").val(a.valid_thru),$("#cvc").val(a.cvc)):$("#paybtn").text("Add  New  Card")},function(a){})}function loadUserInfo(){function a(a){if("success"==a.message){$("#firstname").val(a.name),$("#lastname").val("lack"),$("#email").val("lack"),$("#phone").val(a.phone),$("#height").val(a.height),$("#weight").val(a.weight),$("#shoes_size").val(a.shoes_size);var e="Man"==a.gender?0:1;$("#gender")[0].selectedIndex=e}else alert(a.message)}ajax("/user/info",{},a),a()}function updatePayInfo(){var a={card_number:$("#cardnumber").val(),valid_thru:$("#valid_date").val(),cvc:"#cvc".val()};ajax("/user/update_pay_info",a,function(a){alert("update successfully!"),$("#paybtn").text("Save")})}function changePwd(){var a={old_password:$("#oldpwd").val(),password:$("#newpwd").val(),password_confirmation:$("#cfmpwd").val()};console.log(a),ajax("/user/init_password",a,function(a){"success"==a.message?alert("your password has been modified  successfully"):alert("Password modification failed ")},function(){alert("Password modification failed ")})}function updateUserInfo(){var a={gender:$("#gender option:selected").val(),phone:$("#phone").val(),height:$("#height").val(),weight:$("#weight").val(),shoes_size:$("#shoes_size").val(),name:$("#firstname").val()};ajax("/user/info/update",a,function(a){"success"==a.message?alert("Your information has been updated successfully"):alert("sorry,something went wrong")})}function resetPwd(){}function ajax(a,e,s,n,i){$.ajax({url:a,type:"GET",data:e,success:function(a){"function"==typeof s&&s(a)},error:function(a){"function"==typeof n&&n(a)}})}$(".profile-tab .row").on("click",".column",function(){$(this).addClass("sel").siblings().removeClass("sel");var a=$(this).data("tab");$("."+a).addClass("sel").siblings().removeClass("sel");var e=location.pathname+"#"+a;history.replaceState({title:"switch",url:e,otherKey:""},"",e)}),function(){var a=location.hash.substr(1)||"purchases";$("."+a).addClass("sel").siblings().removeClass("sel"),$(".column[data-tab="+a+"]").addClass("sel").siblings().removeClass("sel"),loadOrderList(),loadUserInfo(),loadPayInfo()}(),$(".forms-wrap ").on("click",".payment .ui.submit.button",updatePayInfo),$(".forms-wrap ").on("click",".setting .ui.submit.button",changePwd),$(".forms-wrap ").on("click",".profile .ui.submit.button",updateUserInfo);
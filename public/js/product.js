"use strict";function registerScroll(){myScroll=new IScroll("#maskcontent",{scrollX:!0,scrollY:!1,mouseWheel:!0,momentum:!1,snap:!0}),myScroll.on("scrollEnd",function(){curpage=myScroll.currentPage.pageX+1,curpage>imgcount||($("#download").text(curpage+"/"+imgcount),displayImage($("#scroller li").children("div").eq(curpage-1)))})}function imgClick(){var e=this;initMask(e),$("#mask").animate({top:"0%"},"200",function(){}),pushHistory()}function pushHistory(){var e=location.href.indexOf("#SEE")>-1?location.href:location.href+"#SEE",t={title:"see large image",url:e,otherkey:""};window.history.pushState(t,"",e),window.addEventListener("popstate",destoryPowPoint,!1)}function destoryPowPoint(){$("#mask").animate({top:"100%"},"200",function(){var e=location.href.indexOf("#SEE")>-1?location.protocol+"//"+location.host+location.pathname:location.href;window.history.replaceState({},"",e)}),window.removeEventListener("popstate",destoryPowPoint,!1)}function initMask(e){var t=$(".row.images").find(".ui.image");imgcount=t.length,$(t).each(function(){$("#imgul").append('<li><div  data-img="'+$(this).data("img")+'" ><div class="loader-wrap" ><div class="ui active inline loader"></div></div></div></li>')}),$("#scroller li").css({width:100/imgcount+"%"}),$("#scroller").css({width:100*imgcount+"%"}),registerScroll();var i=t.index($(e));myScroll.goToPage(i,0,0);var r=myScroll.currentPage.pageX;displayImage($("#scroller li").children("div").eq(r))}function displayImage(e){var t=$(e).data("img");if(t){var i=new Image;i.onload=function(){i.onload=null,$(e).css({backgroundImage:"url("+t+")"}),$(e).text("")},i.src=t}}$(".ui.rating").rating(),$(".description.p70.column").on("click",".more",function(){$(this).prev().toggleClass("expand")}),$(".ui.left.arrow").on("click",function(){myScroll.prev()}),$(".ui.right.arrow").on("click",function(){myScroll.next()}),$(".row.images").on("click",".ui.image",imgClick),$("#pptclose").on("click",destoryPowPoint),$(function(){!function(){function e(e,i){var r=$("#payment-form");if(i.error)t(i.error.message),r.find(".submit").prop("disabled",!1);else{var n=i.id;r.append($('<input type="hidden" name="stripeToken">').val(n)),r.get(0).submit()}}function t(e){$(".payment-errors").text(e).show(),setTimeout(function(){$(".payment-errors").hide()},1e4)}function i(){$("#payment-form").find("input[type=hidden]").remove();var e,t={start_date:$("#input_start_date").val(),end_date:$("#input_end_date").val(),divers:$("#divers")[0].selectedOptions[0].innerText,type:$("#passengers")[0].selectedOptions[0].innerText,pid:$("#product").attr("productid")};for(var i in t){if(!t[i])return e=!1;e=!0,$("#payment-form").append($('<input type="hidden" name="'+i+'">').val(t[i]))}return e}$(".cc-postalcode").payment("restrictNumeric"),$(".cc-number").payment("formatCardNumber"),$(".cc-exp").payment("formatCardExpiry"),$(".cc-cvc").payment("formatCardCVC"),$.fn.toggleInputError=function(e){return this.parent(".field").toggleClass("invalid",e),this};var r=$("#payment-form");r.submit(function(n){if(n.preventDefault(),!i())return void alert("Please fill out the order form information.");var o=$.payment.cardType($(".cc-number").val());return $(".cc-number").toggleInputError(!$.payment.validateCardNumber($(".cc-number").val())),$(".cc-exp").toggleInputError(!$.payment.validateCardExpiry($(".cc-exp").payment("cardExpiryVal"))),$(".cc-cvc").toggleInputError(!$.payment.validateCardCVC($(".cc-cvc").val(),o)),$(".field.invalid").length>0?(t("Your input is incorrect!"),!1):(r.find(".submit").prop("disabled",!0),Stripe.card.createToken(r,e),!1)})}(),$(".date-pick").kuiDate({className:"date-pick",isDisabled:"0"})});var myScroll,imgcount=0,curpage=0;
"use strict";function search(n){var e=$(".search-bar .from").find("input").val(),i=$(".search-bar .to").find("input").val(),a=$(".search-bar .passengers").find("input").val();n||e||i||a?location.href="/search?destination="+n+"&date_start="+e+"&data_end="+i+"&passenger="+a:alert("please choose one option for search at least ~")}function seeMoreDestination(){var n=$(this);$.ajax({url:"/popular/more",type:"GET",data:{},success:function(e){var i="";e.forEach(function(n,e){i+='<a class="card" href="'+(n.url?n.url:"#")+'">\n                    <div class="ui  image">\n                      <div class="ui dimmer visible active">\n                        <div class="content">\n                          <div class="center">\n                            <div class="ui header">'+n.desc+'</div>\n                          </div>\n                        </div>\n                      </div>\n                      <img src="'+n.image_url+'">\n                    </div>\n                </a>'}),$(".third-sec .cards").append(i),n.remove()},error:function(n){}})}function signIn(){var n=$("#signin-email-input").val(),e=$("#signin-password-input").val();n&&e?$.ajax({url:"/user/login/",type:"GET",data:{email:n,password:e},success:function(n){console.log(n),"success"==n.message?($("header.ui.bar  .right.menu").addClass("signed"),$("header.ui.bar  .right.menu").text(n.user),signInDialog.modal("hide")):alert(n.message)},error:function(n){alert("Sorry,the server was wrong")}}):alert("Please fill in all options ~")}function signUp(){var n=$("#signup-email-input").val(),e=$("#signup-password-input").val(),i=$("#signup-name-input").val(),a=$("#signup-confirm-password-input").val();n&&e&&i&&a?$.ajax({url:"/user/register",type:"GET",data:{email:n,password:e,password_confirmation:a,name:i},success:function(n){0==n.code?signInAlert():alert(n.message)},error:function(n){alert("Sorry,the server was wrong")}}):alert("Please fill in all options ~")}function signOut(){$.get("/user/logout",function(n){console.log(n),$("header.ui.bar  .right.menu").removeClass("signed"),alert("logout succeeded")})}function signInAlert(){signInDialog.modal({blurring:!0,transition:"fade up"}).modal("show")}function signUpAlert(){signUpDialog.modal({blurring:!0,transition:"fade up"}).modal("show")}window.screen&&screen.width?window.screenSize=screen.width>767?"PC":"MOBILE":window.screenSize="PC";var signUpDialog="",signInDialog="";$(window).scroll(function(){"MOBILE"!=window.screenSize&&(document.body.scrollTop>30?($(".following.bar").addClass("light"),$(".menu").removeClass("inverted")):($(".following.bar").removeClass("light"),$(".menu").addClass("inverted")))}),$(".search-bar").on("click",".search-btn",function(){var n="";n="PC"==window.screenSize?$(this).siblings(".four.wide").find("input[name=country]").val():$(this).siblings(".ten.wide").find("input[name=country]").val(),search(n),n?ga("send","event","search_click","content:"+n,""):ga("send","event","search_click","content:null","")}),$(".second-sec").on("click",".ui.list .item",function(){var n=$(this).parent().siblings(".ui.header").text(),e=$(this).text();ga("send","event","course_click","title:"+n+",content:"+e,"")}),$(".third-sec").on("click",".card",function(){var n=$(this).find(".content .ui.header").text();ga("send","event","hotSpot_click","hotSpot_name:"+n,"")}),$(".fourth-sec").on("click",".ui.image",function(){var n=$(this).find(".content .ui.header").text();ga("send","event","popularSpot_click","popularSpot_name:"+n,"")}),$(".more-course").on("click",function(){ga("send","event","seeMoreCourse_click","","")}),$(".more-destination").on("click",function(){ga("send","event","seeMoreDestination_click","","")}),$(".ui.mini.teal.button").on("click",function(n){ga("send","event","contant_us_click","",""),n.preventDefault()}),$(function(){var n=$(".ui.dropdown.destination");signUpDialog=$(".ui.modal.signup-dialog"),signInDialog=$(".ui.modal.login-dialog"),n.dropdown({direction:"updown",transition:"slide down",allowAdditions:!1}),$(".ui.dropdown.passengers").dropdown(),$(".date-pick").kuiDate({className:"date-pick",isDisabled:"0"}),$(".search-bar input.search").on("input propertychange",function(){n.addClass("loading");var e=$(this),i=e.val(),a="";$.getJSON("/destination",{word:i},function(i){n.removeClass("loading"),i instanceof Array&&i.length>0&&($(i).each(function(n,e){a+='<div class="item" data-value="'+e+'">'+e+"</div>"}),e.siblings(".menu").html(a),n.dropdown("refresh"))})}),$(".user.ui.dropdown").dropdown({on:"hover",action:function(){}})}),$(".ui.modal").on("click",".signin-button",signIn),$(".ui.modal").on("click",".signup-button",signUp),$("header.ui.bar").on("click",".signin.item",signInAlert),$("header.ui.bar").on("click",".signup.item",signUpAlert),$(".more-destination").on("click",".ui.button",seeMoreDestination);